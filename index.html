<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날씨 기반 의상 추천 — 오늘 뭐 입지?</title>
    <meta name="description" content="실시간 날씨 정보를 기반으로 오늘의 최적 의상을 추천해주는 스마트 웹 애플리케이션">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <header>
            <div class="header-top">
                <h1>오늘 뭐 입지?</h1>
                <button id="dark-mode-toggle"><i class="fas fa-moon"></i></button>
            </div>
            <p class="subtitle">날씨에 맞는 똑똑한 의상 추천</p>
            <div class="weather-info">
                 <p><span id="location">위치 불러오는 중...</span></p>
                 <p>현재 날씨: <span id="weather"></span> (<span id="apparent-temp">체감: 22℃</span>)</p>
                 <p id="weather-comparison">어제보다 3℃ 높아요</p> 
            </div>
        </header>
        <main>
            <div class="controls">
                <div class="gender-selection">
                    <button data-gender="male" class="active"><i class="fas fa-mars"></i> 남성</button>
                    <button data-gender="female"><i class="fas fa-venus"></i> 여성</button>
                </div>
                <div class="style-selection">
                    <button data-style="casual" class="active"><i class="fas fa-tshirt"></i> 캐주얼</button>
                    <button data-style="modern"><i class="fas fa-user-tie"></i> 모던</button>
                    <button data-style="street"><i class="fas fa-running"></i> 스트리트</button>
                </div>
                <div class="body-type-selection">
                    <button data-body-type="normal" class="active"><i class="fas fa-thermometer-half"></i> 보통</button>
                    <button data-body-type="cold-sensitive"><i class="fas fa-snowflake"></i> 추위 잘 탐</button>
                    <button data-body-type="heat-sensitive"><i class="fas fa-fire"></i> 더위 잘 탐</button>
                </div>
            </div>
            <div id="advice-section">
                <p id="outfit-explanation"></p>
                <p id="contextual-advice"></p>
            </div>

            <!-- ===== 아바타 코디 미리보기 섹션 ===== -->
            <div id="avatar-section">
                <h2><i class="fas fa-user-astronaut"></i> 코디 미리보기</h2>
                <div id="avatar-container">
                    <div id="avatar-display">
                        <!-- SVG 마네킹 바디 -->
                        <div id="avatar-body">
                            <svg viewBox="0 0 200 460" xmlns="http://www.w3.org/2000/svg" id="mannequin-svg">
                                <!-- Head -->
                                <circle cx="100" cy="38" r="28" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                                <!-- Neck -->
                                <rect x="90" y="64" width="20" height="18" rx="4" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1"/>
                                <!-- Body / Torso -->
                                <path d="M60 82 Q55 82 52 90 L42 160 Q40 172 50 175 L75 180 L75 240 L125 240 L125 180 L150 175 Q160 172 158 160 L148 90 Q145 82 140 82 Z" fill="var(--mannequin-body)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                                <!-- Left Arm -->
                                <path d="M52 90 Q38 95 30 130 Q25 150 28 170 Q30 178 36 176 Q42 174 44 160 L50 130" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                                <!-- Right Arm -->
                                <path d="M148 90 Q162 95 170 130 Q175 150 172 170 Q170 178 164 176 Q158 174 156 160 L150 130" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                                <!-- Left Leg -->
                                <path d="M75 240 L68 350 Q66 370 70 380 L60 410 Q58 420 65 425 L85 425 Q90 425 90 420 L88 400 L82 370 L90 240" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                                <!-- Right Leg -->
                                <path d="M125 240 L132 350 Q134 370 130 380 L140 410 Q142 420 135 425 L115 425 Q110 425 110 420 L112 400 L118 370 L110 240" fill="var(--mannequin-skin)" stroke="var(--mannequin-outline)" stroke-width="1.5"/>
                            </svg>
                            <!-- Clothing layers rendered on top of SVG mannequin -->
                            <div id="clothing-layer-outer" class="clothing-layer" style="display:none;"></div>
                            <div id="clothing-layer-top" class="clothing-layer" style="display:none;"></div>
                            <div id="clothing-layer-bottom" class="clothing-layer" style="display:none;"></div>
                        </div>
                        <p id="avatar-hint"><i class="fas fa-hand-pointer"></i> 아래 추천 의상의 '입어보기'를 클릭하세요</p>
                    </div>
                    <div id="avatar-outfit-info">
                        <h3><i class="fas fa-list-check"></i> 착용 중인 의상</h3>
                        <div id="outfit-slots">
                            <div class="outfit-slot" id="slot-outer">
                                <div class="slot-icon"><i class="fas fa-vest-patches"></i></div>
                                <div class="slot-info">
                                    <span class="slot-label">아우터</span>
                                    <span class="slot-name" id="slot-outer-name">미착용</span>
                                </div>
                                <button class="slot-remove" data-category="outer" style="display:none;" title="벗기"><i class="fas fa-times"></i></button>
                            </div>
                            <div class="outfit-slot" id="slot-top">
                                <div class="slot-icon"><i class="fas fa-shirt"></i></div>
                                <div class="slot-info">
                                    <span class="slot-label">상의</span>
                                    <span class="slot-name" id="slot-top-name">미착용</span>
                                </div>
                                <button class="slot-remove" data-category="top" style="display:none;" title="벗기"><i class="fas fa-times"></i></button>
                            </div>
                            <div class="outfit-slot" id="slot-bottom">
                                <div class="slot-icon"><i class="fas fa-socks"></i></div>
                                <div class="slot-info">
                                    <span class="slot-label">하의</span>
                                    <span class="slot-name" id="slot-bottom-name">미착용</span>
                                </div>
                                <button class="slot-remove" data-category="bottom" style="display:none;" title="벗기"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                        <button id="avatar-reset-btn"><i class="fas fa-rotate-left"></i> 전체 초기화</button>
                    </div>
                </div>
            </div>

            <div id="recommendations"></div>
            
            <div id="my-closet">
                <h2><i class="fas fa-door-open"></i> 내 옷장</h2>
                <div class="closet-controls">
                     <input type="text" id="closet-item-name" placeholder="옷 이름">
                     <select id="closet-item-category">
                         <option value="outer">아우터</option>
                         <option value="top">상의</option>
                         <option value="bottom">하의</option>
                     </select>
                     <button id="add-to-closet"><i class="fas fa-plus"></i> 추가</button>
                </div>
                <div id="my-closet-items"></div>
                <div class="closet-recommend-controls">
                    <label for="use-my-closet-toggle">내 옷으로만 추천받기</label>
                    <input type="checkbox" id="use-my-closet-toggle">
                </div>
            </div>
        </main>
    </div>
    <script src="main.js" type="module"></script>
</body>
</html>